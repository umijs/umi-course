# 使用 CLI 创建初始化项目

## 第一步 安装 [create-umi](https://github.com/umijs/create-umi)

```bash
$ yarn global add create-umi
...
success Installed "create-umi@0.6.0" with binaries:
      - create-umi
✨  Done in 36.07s.
```

create-umi 主要是用来使用命令行创建 umi 相关的库或者项目。命令中打印 success 说明安装成功，如果你还需要进一步确认，可以执行 `create-umi -v` 来查看 create-umi 的版本号。


## 第二步 使用 create-umi 新建项目

> * 第一个选项 `Select the boilerplate type` 选择 `app` 
* 如果你遇到了 `Do you want to use typescript?` 选项，根据你的情况选择是否使用 TypeScript


```bash
$ cd 你的常用项目目录
$ create-umi hero
? What functionality do you want to enable? (Press <space> to select, <a> to tog
gle all, <i> to invert selection)
 ◉ antd
❯◉ dva
 ◯ code splitting
 ◯ dll
 ◯ hard source
```
> 这里的 hero 指是项目名，你可以输入任意的名字。


create-umi 提供定制化能力，你可以通过空格键来选中你需要的功能，然后通过敲击回车键开始创建项目。这里我们选中 antd 和 dva 就好。

```bash
? What functionality do you want to enable? antd, dva
   create package.json
   create mock/.gitkeep
   create src/assets/yay.jpg
   create src/layouts/index.css
   create src/layouts/index.js
   create src/pages/index.css
   create src/pages/index.js
   create src/global.css
   create .gitignore
   create .editorconfig
   create .env
   create .umirc.js
   create .eslintrc
   create .prettierrc
   create .prettierignore
   create src/models/.gitkeep
   create src/app.js
📋  Copied to clipboard, just use Ctrl+V
✨  File Generate Done
```

如果你的命令行打印的日志如上，说明新建项目完成了，如果有其他的错误，可以确认一下当前目录下是否已经存在 hero 文件夹。你需要注意 create-umi 会自动帮你新建 hero 文件夹。


## 第三步 切换到项目目录，安装依赖

```bash
$ cd hero
$ yarn 
...这个过程需要一些时间
success Saved lockfile.
✨  Done in 170.43s.
```

看到命令行打印 success，一般就是安装成功了，但是有时候因为一些网络问题，会出现丢包的情况，需要你重新运行 `yarn` 验证是否全部安装成功。


## 第四步 启动开发服务器

```bash
$ yarn start
✔ success webpack compiled in 2s 743ms
 DONE  Compiled successfully in 2750ms                                  10:24:03


  App running at:
  - Local:   http://localhost:8000/ (copied to clipboard)
  - Network: http://192.168.199.195:8000/
```

你可以通过浏览器访问 http://localhost:8000/ 来查看页面：

![](https://cdn.nlark.com/yuque/0/2018/png/123174/1543976809778-2d1a60e0-1ae6-4c17-a812-51d6d0b52aad.png#align=left&display=inline&height=430&linkTarget=_blank&originHeight=1528&originWidth=2650&width=747)

还不错吧！😁


## 错误说明
如果，你的表现和上面的不同，你可以通过比对下面两个情况来修正。<br />1. 打印如下

```bash
? message Probably:
  /usr/local/bin/node /Users/xiaohuoni/Documents/***/***/node_module
s/umi/lib/scripts/realDev.js dev (pid 928)
  in /Users/xiaohuoni/***/***/

Would you like to run the app on another port instead? (Y/n)
```

这个问题可能是因为你的其他项目或应用已经占用了 umi 默认的 8000 端口，你只要输入 Y 并回车，umi 将在另一个空闲端口上启动服务，最终访问路径以输出日志为准。

2. 其他情况
* 可能是 Node.js 版本问题引起的，确认一下你的开发环境。

* 网络问题引起部分依赖安装失败，可能需要科学上网，或者使用国内源，例如 [tyarn](http://npm.taobao.org/package/tyarn)。


[在 GitHub 上编辑此页](https://github.com/xiaohuoni/umi-course/blob/master/doc/06.md)
